[
  {
    "id": 25242923,
    "title": "Push Notification Validation",
    "section_id": 1311070,
    "template_id": 1,
    "type_id": 4,
    "priority_id": 6,
    "milestone_id": null,
    "refs": null,
    "created_by": 282,
    "created_on": 1639073551,
    "updated_by": 282,
    "updated_on": 1639073551,
    "estimate": null,
    "estimate_forecast": null,
    "suite_id": 450658,
    "display_order": 1,
    "custom_preconds": "GIVEN the user downloaded the app \r\nAND user is logged in with MLB account in the app\r\nAND the user has push notifications enabled\r\nAND the user has quit/closed the App",
    "custom_steps": "WHEN user From one signal user dashboard, create a push msg and send push to specific device(s)\r\n\r\n",
    "custom_expected": "THEN client(s) will receive push\r\n\r\n",
    "custom_steps_separated": null
  },
  {
    "id": 25242925,
    "title": "OneSignal External User ID",
    "section_id": 1311070,
    "template_id": 1,
    "type_id": 4,
    "priority_id": 6,
    "milestone_id": null,
    "refs": null,
    "created_by": 282,
    "created_on": 1639073765,
    "updated_by": 282,
    "updated_on": 1639073856,
    "estimate": null,
    "estimate_forecast": null,
    "suite_id": 450658,
    "display_order": 3,
    "custom_preconds": "GIVEN the user downloaded the app \r\nAND user is NOT logged in with MLB account in the app",
    "custom_steps": "The device in OneSignal should have an associated \"External User ID\" value set. OneSignal has a column specifically for external user IDs.\r\n\r\nNOTE: Since this value is never unset, there should always be a value associated with the device. There should be a value even if the user is already logged in and launches the app from a \"cold start\"\r\n\r\nNOTE: The ID we are looking for is the UID. This can be derived from the access token which should be available from Charles in just about any network call we make. Once you have the access token, use this tool: https://jwt.io/ to decode it an validate the UID fields\r\n\r\n",
    "custom_expected": null,
    "custom_steps_separated": [
      {
        "content": "WHEN the user logs into app \n\n",
        "expected": "THEN the EXTERNAL USER ID should be filled out with the OKTA ClientID on the OneSignal console and look similar to \"00u8s1esrMX11rejf356\"\n\nOneSignal Dashboard\n"
      }
    ]
  },
  {
    "id": 28511426,
    "title": "In App Review Prompt - existing user",
    "section_id": 1311070,
    "template_id": 1,
    "type_id": 4,
    "priority_id": 6,
    "milestone_id": null,
    "refs": "FTP-4191",
    "created_by": 258,
    "created_on": 1652387418,
    "updated_by": 258,
    "updated_on": 1652387854,
    "estimate": null,
    "estimate_forecast": null,
    "suite_id": 450658,
    "display_order": 4,
    "custom_preconds": "Test with https://app.onesignal.com/apps/1a2d8ced-57e6-4d57-b78a-280724b685dd/in_app_messages\r\n\r\nGIVEN MLB Play app installed on Device\r\nAND user logged in to the app\r\n\r\n",
    "custom_steps": null,
    "custom_expected": null,
    "custom_steps_separated": [
      {
        "content": "WHEN user's profile level is higher than Prospect\nAND user's token is >0\nAND user is on Games tab\n",
        "expected": "THEN user should be displayed with In APP Review Prompt\nAND Modal should have the following elements:\n\n* Dismiss icon in the top right corner\n* Title text: Enjoying MLB Play?\n* Body text: Rating our app helps grow the MLB Play community and constructive feedback helps to improve our games for you.\n* Button 1: Yes! \n* Link to relevant app store for rating\n* Button 2: Could be better \n* Link to feedback survey: MLB Play Feedback"
      }
    ]
  },
  {
    "id": 25242924,
    "title": "Push Notification Deeplink - app in background",
    "section_id": 1620607,
    "template_id": 1,
    "type_id": 4,
    "priority_id": 6,
    "milestone_id": null,
    "refs": null,
    "created_by": 282,
    "created_on": 1639073602,
    "updated_by": 258,
    "updated_on": 1672771981,
    "estimate": null,
    "estimate_forecast": null,
    "suite_id": 450658,
    "display_order": 1,
    "custom_preconds": "GIVEN the user downloaded the app ( NOT the Production build)\r\nAND user is logged in with MLB account in the app\r\nAND the user has push notifications enabled\r\nAND the user has App backgrounded\r\n\r\nNOTE: Push Notification should be setup with deeplink in the \"URL to launch\" field and not the actual text of message\r\nNOTE: On iOS make sure you do not have multiple versions of the app installed (Double check these links)",
    "custom_steps": "WHEN an engineer sends a OneSignal Push Notification\r\n\r\n",
    "custom_expected": "THEN message is successfully sent AND is indicated within OneSignal\r\n\r\n",
    "custom_steps_separated": [
      {
        "content": "WHEN an engineer sends a OneSignal Push Notification\n",
        "expected": "THEN message is successfully sent AND is indicated within OneSignal\nAND the users devices should receive a notification\n\n"
      },
      {
        "content": "WHEN the user opens the received notification from the device(s)\n\n",
        "expected": "THEN the app is opened to the proper location of the deeplink submitted in the push notification\n\n"
      }
    ]
  },
  {
    "id": 29917108,
    "title": "Push Notification Deeplink - targeted tab",
    "section_id": 1620607,
    "template_id": 1,
    "type_id": 4,
    "priority_id": 6,
    "milestone_id": null,
    "refs": null,
    "created_by": 258,
    "created_on": 1672771935,
    "updated_by": 258,
    "updated_on": 1674151008,
    "estimate": null,
    "estimate_forecast": null,
    "suite_id": 450658,
    "display_order": 2,
    "custom_preconds": "GIVEN the user downloaded the app ( NOT the Production build)\r\nAND user is logged in with MLB account in the app\r\nAND the user has push notifications enabled\r\n\r\nNOTE: Push Notification should be setup with deeplink in the \"URL to launch\" field and not the actual text of message\r\nNOTE: On iOS make sure you do not have multiple versions of the app installed (Double check these links)",
    "custom_steps": "WHEN an engineer sends a OneSignal Push Notification\r\n\r\n",
    "custom_expected": "THEN message is successfully sent AND is indicated within OneSignal\r\n\r\n",
    "custom_steps_separated": [
      {
        "content": "WHEN a PN is sent with a deeplink for a targeted tab: mlbplay://com.mlbam.BTS/[game | feed | profile]\n",
        "expected": "THEN message is successfully sent AND is indicated within OneSignal\nAND the users devices should receive a notification\n\n"
      },
      {
        "content": "WHEN the user opens the received notification from the device(s)\n\n",
        "expected": "THEN the targeted tab is opened "
      }
    ]
  },
  {
    "id": 29917109,
    "title": "Push Notification Deeplink - targeted gameloop",
    "section_id": 1620607,
    "template_id": 1,
    "type_id": 4,
    "priority_id": 6,
    "milestone_id": null,
    "refs": null,
    "created_by": 258,
    "created_on": 1672772120,
    "updated_by": 258,
    "updated_on": 1674151381,
    "estimate": null,
    "estimate_forecast": null,
    "suite_id": 450658,
    "display_order": 3,
    "custom_preconds": "GIVEN the user downloaded the app ( NOT the Production build)\r\nAND user is logged in with MLB account in the app\r\nAND the user has push notifications enabled\r\n\r\nNOTE: Push Notification should be setup with deeplink in the \"URL to launch\" field and not the actual text of message\r\nNOTE: On iOS make sure you do not have multiple versions of the app installed (Double check these links)",
    "custom_steps": "WHEN an engineer sends a OneSignal Push Notification\r\n\r\n",
    "custom_expected": "THEN message is successfully sent AND is indicated within OneSignal\r\n\r\n",
    "custom_steps_separated": [
      {
        "content": "WHEN a PN is sent with a deeplink for a targeted tab: mlbplay://com.mlbam.BTS/game?id=BeatTheStreak2022\n",
        "expected": "THEN message is successfully sent AND is indicated within OneSignal\nAND the users devices should receive a notification\n\n"
      },
      {
        "content": "WHEN the user opens the received notification from the device(s)\n\n",
        "expected": "THEN the targeted tab is opened "
      },
      {
        "content": "WHEN user receives\nmlbplay://com.mlbam.BTS/game?id=BeatTheStreak2022&contestId=xy",
        "expected": "THEN it should open certain contest inside the Beat The Streak game loop"
      }
    ]
  },
  {
    "id": 29917107,
    "title": "Sending a deeplink PN - DO NOT TEST",
    "section_id": 1620607,
    "template_id": 1,
    "type_id": 4,
    "priority_id": 6,
    "milestone_id": null,
    "refs": null,
    "created_by": 258,
    "created_on": 1672770888,
    "updated_by": 258,
    "updated_on": 1674150910,
    "estimate": null,
    "estimate_forecast": null,
    "suite_id": 450658,
    "display_order": 4,
    "custom_preconds": null,
    "custom_steps": "1. Create a message in OneSignal in needed environment:\r\n- title, text, etc does not matter\r\n- make sure to include correct deeplink\r\n2. Make sure your phone is added to the list \r\n![](index.php?/attachments/get/13408074)\r\n3. Select your phone, send the notification\r\n\r\n\r\n",
    "custom_expected": null,
    "custom_steps_separated": null
  },
  {
    "id": 29978357,
    "title": "Push Notification Deeplink - incorrect schema",
    "section_id": 1620607,
    "template_id": 1,
    "type_id": 4,
    "priority_id": 6,
    "milestone_id": null,
    "refs": null,
    "created_by": 258,
    "created_on": 1674151046,
    "updated_by": 258,
    "updated_on": 1674151344,
    "estimate": null,
    "estimate_forecast": null,
    "suite_id": 450658,
    "display_order": 5,
    "custom_preconds": "GIVEN the user downloaded the app ( NOT the Production build)\r\nAND user is logged in with MLB account in the app\r\nAND the user has push notifications enabled\r\n",
    "custom_steps": null,
    "custom_expected": "\r\n\r\n",
    "custom_steps_separated": [
      {
        "content": "WHEN user receives an incomplete or incorrect scheme such as mlbplay:// without bundle id, mlb://, play:// or just com.mlbam.BTS ",
        "expected": "THEN it will direct user to default Game tab\n\n(no matter if user is on the gameloop or other pages of the app)"
      }
    ]
  },
  {
    "id": 29978358,
    "title": "EC - Push Notification Deeplink",
    "section_id": 1620607,
    "template_id": 1,
    "type_id": 4,
    "priority_id": 6,
    "milestone_id": null,
    "refs": null,
    "created_by": 258,
    "created_on": 1674151412,
    "updated_by": 258,
    "updated_on": 1674151750,
    "estimate": null,
    "estimate_forecast": null,
    "suite_id": 450658,
    "display_order": 6,
    "custom_preconds": "GIVEN the user downloaded the app ( NOT the Production build)\r\nAND user is logged in with MLB account in the app\r\nAND the user has push notifications enabled\r\n",
    "custom_steps": null,
    "custom_expected": null,
    "custom_steps_separated": [
      {
        "content": "WHEN user is inside the BTS gameloop \nAND user receives a PN for BTS \nAND user clicks on the PN",
        "expected": "THEN nothing should happen\n"
      },
      {
        "content": "WHEN user is logged out \nAND user receives a PN (any)\nAND user clicks on the PN",
        "expected": "THEN user is taken to the welcome page \nAND deeplink path does not work after user logs in - user is just taken to the Games tab"
      }
    ]
  }
]