[
  {
    "id": 48271,
    "title": "Auto Check-In UPDATED",
    "section_id": 6437,
    "template_id": 1,
    "type_id": 4,
    "priority_id": 4,
    "milestone_id": null,
    "refs": null,
    "created_by": 25,
    "created_on": 1415033907,
    "updated_by": 43,
    "updated_on": 1521419205,
    "estimate": null,
    "estimate_forecast": null,
    "suite_id": 826,
    "display_order": 14,
    "custom_preconds": "http://qa-ballparkappconfig.mlb.com/ios/5.2.0/appconfig.json\r\n\r\nThis needs to be tested on regular games AND non-game events.  Non-game event check-in windows are controlled in the appconfig currently.\r\n\r\nSteps to test BLE features: https://wiki.mlbam.com/display/QAspace/iBeacon+Testing",
    "custom_steps": null,
    "custom_expected": null,
    "custom_steps_separated": [
      {
        "content": "When the app is backgrounded\nAnd there is no scheduled game within the 3 hour check in window",
        "expected": "Then the user will receive a welcome notification (Welcome to Fenway Park!)\nAnd they will not be checked in automatically\nAnd sliding the notification will bring the user to the ballpark guide\n"
      },
      {
        "content": "When the app is killed\nAnd there is no scheduled game within the 3 hour check in window\n",
        "expected": "The the user will receive a welcome notification (Welcome to Fenway Park!)\nAnd they will not be check in automatically\nAnd sliding the notification will bring the user to the ballpark guide"
      },
      {
        "content": "When the app is foregrounded\nAnd there is no scheduled game within the 3 hour check in window",
        "expected": "Then nothing will happen inside the app"
      },
      {
        "content": "When the app is backgrounded\nAnd there is a scheduled game within the 3 hour check in window",
        "expected": "Then the user will receive a check-in notification\nAnd they will be automatically checked into the game\nAnd sliding the notification will bring the user to the Checked In! screen"
      },
      {
        "content": "When the app is killed\nAnd there is a scheduled game within the 3 hour check in window",
        "expected": "Then the user will receive a check-in notification\nAnd they will be automatically checked into the game\nAnd sliding the notification will bring the user to the Checked In! screen"
      },
      {
        "content": "When the app is killed \nOr the app is backgrounded\nAnd there is a scheduled game within the 3 hour check in window",
        "expected": "Then the user will receive a check-in notification\nAnd they will be automatically checked into the game\nAnd if they launch the app from the home screen instead of swiping on the notification\nThen the user will be brought to the Checked In! screen"
      },
      {
        "content": "When the app is foregrounded\nAnd there is a scheduled game within the 3 hour check in window",
        "expected": "Then the user will receive a check-in notification\nAnd they will be automatically checked into the game\nAnd they will brought to the Checked In! screen"
      },
      {
        "content": "When the app is backgrounded OR killed\nAnd there is an issue with the check in service that prevents the check in from completing (mock this by adjusting check in window date on QA)",
        "expected": "Then the user will receive a welcome notification (Welcome to Fenway Park! slide to check in)\nAnd sliding the notification will bring the user to the manual check in screen"
      },
      {
        "content": "When the app is foregrounded\nAnd there is an issue with the check in service that prevents the check in from completing",
        "expected": "Then the manual check in screen will be presented to the user"
      },
      {
        "content": "When the device is asleep",
        "expected": "Then the user can still receive BLE notifications"
      },
      {
        "content": "When the user auto checks into a game with no offers available\n",
        "expected": "Then the user will see a message stating offers are loading\nAnd after attempting to fetch offers a message reading no offers unlocked will be displayed"
      },
      {
        "content": "When the user auto checks into a game with offers available",
        "expected": "Then the user will see the unlocked offer displayed below the matchup information\nAnd tapping on the offer will open that specific offer page"
      },
      {
        "content": "When the user is auto checked in\nAnd the user is on the Checked In! screen",
        "expected": "Then the user will see a share button\nAnd tapping that button will open the share check in screen (manual check in page with diff header)\n\nconfirm you can complete a share"
      },
      {
        "content": "When we receive an iBeacon notification from a stadium",
        "expected": "Then we will not receive another notification from that stadium until the time limit is expired (8 hours)\n\n(you can have dev set it to 5 minutes as well to test the reverse case)"
      },
      {
        "content": "When the user sets up an iBeacon for a stadium on the kill switch list (appconfig: killAutoCheckinForVenues)\nAnd the user attempts to auto check in",
        "expected": "Then the user will be unable to"
      },
      {
        "content": "When we change the text of the BLE notifications in Homebase:\nwelcomeCheckinSuccessNotification :: text field \nwelcomeCheckinFailNotification :: text field \nwelcomeOnlyNotification :: text field \ngreeterNotification :: text field \nexitNotification :: text field\n",
        "expected": "Then those changes will be reflected in the app"
      },
      {
        "content": "When there is a non-game event scheduled at a ballpark(fanfest, all star Sunday, hr derby, etc.)",
        "expected": "THEN the user will receive an auto-checkin for that event\nand when looking in the Journal the ballpark name and city will appear for the journal entry"
      }
    ]
  },
  {
    "id": 48282,
    "title": "POI Background Notifications UPDATED",
    "section_id": 6850,
    "template_id": 1,
    "type_id": 4,
    "priority_id": 4,
    "milestone_id": null,
    "refs": null,
    "created_by": 25,
    "created_on": 1415050043,
    "updated_by": 40,
    "updated_on": 1460405051,
    "estimate": null,
    "estimate_forecast": null,
    "suite_id": 826,
    "display_order": 9,
    "custom_preconds": "http://qa.mlb.com/game/mlb/mobile/ballpark/iphone/config/poi.json\r\n\r\nHow to guide to testing iBeacon: https://wiki.mlbam.com/display/QAspace/iBeacon+Testing",
    "custom_steps": null,
    "custom_expected": null,
    "custom_steps_separated": [
      {
        "content": "When the app is backgrounded\nAnd the user enters the range of a POI beacon",
        "expected": "Then the user will receive a notification stating what POI they are near\nAnd tapping on that notification will bring the user to that POI's detail page, unlocking it in the process"
      },
      {
        "content": "When the app is foregrounded\nAnd the user enters the range of a POI beacon",
        "expected": "Then the user will receive an in app notification banner stating what POI they are near\nAnd tapping on that banner will bring the user to that POI's detail page, unlocking it in the process"
      },
      {
        "content": "When the app is killed\nAnd the user enters the range of a POI beacon",
        "expected": "Then the user will receive a notification stating what POI they are near\nAnd tapping on that notification will bring the user to that POI's detail page, unlocking it in the process"
      },
      {
        "content": "When the device is asleep",
        "expected": "Then the user can still receive BLE POI notifications\n"
      },
      {
        "content": "When a POI is marked as backgroundNotification: \"0\" in the poi.json",
        "expected": "Then the user will not receive a background notification when near that POI beacon"
      },
      {
        "content": "When the notification text is changed in the poi.json (notificationText)",
        "expected": "Then the change will be reflected in the app"
      },
      {
        "content": "When multiple POI beacons are in the range",
        "expected": "Then a notification will be received for the first one arbitrarily returned"
      },
      {
        "content": "When a user receives a POI background notification\nAnd the user doesn't tap the notification to unlock the POI",
        "expected": "Then the background notification should reset at 10am the following day (follows device time)\nAnd if the user enters the poi beacon range again they should receive another background notification"
      },
      {
        "content": "When a user receives a POI background notification\nAnd the user taps on it to unlock the POI",
        "expected": "Then the user will no longer receive background notifications for the unlocked POI"
      },
      {
        "content": "When we edit the lastUpdated field in the poi.json for a specific POI\nAnd a user has already unlocked that POI",
        "expected": "Then the user will receive a new background notification the next time they enter that POI's beacon range\n\n(this has to clear 60 min cache)"
      }
    ]
  },
  {
    "id": 54679,
    "title": "Promo Beacons",
    "section_id": 7982,
    "template_id": 1,
    "type_id": 7,
    "priority_id": 4,
    "milestone_id": null,
    "refs": null,
    "created_by": 40,
    "created_on": 1433257165,
    "updated_by": 40,
    "updated_on": 1448383420,
    "estimate": null,
    "estimate_forecast": null,
    "suite_id": 826,
    "display_order": 1,
    "custom_preconds": "https://wiki.mlbam.com/display/QAspace/iBeacon+Testing",
    "custom_steps": null,
    "custom_expected": null,
    "custom_steps_separated": [
      {
        "content": "When the app is backgrounded\nAnd the user enters the range of a promo beacon\nAnd the promo campaign is still running",
        "expected": "Then the user will receive a notification stating what promo is available\nAnd tapping on that notification will open Ballpark and then launch the user to that promo's detail page(webview)"
      },
      {
        "content": "When the app is backgrounded\nAnd the user enters the range of a promo beacon\nAnd the promo campaign time has expired",
        "expected": "Then the user will receive a notification stating what promo is available\nAnd tapping on that notification will open Ballpark and then launch the user to that promo's detail page(webview)\nAnd the promo page will say that the promo has expired\n\n*Ask development to change the campaignEndDate value so that the campaign becomes expired"
      },
      {
        "content": "When the user is actively in the app\nAnd the user enters the range of a promo beacon\nAnd the promo campaign is still running\n",
        "expected": "Then the user will receive an alert message stating what promo is available\nAnd tapping on the 'View details' button of the alert will launch the user to that promo's detail page(webview)"
      },
      {
        "content": "When the user is actively in the app\nAnd the user enters the range of a promo beacon\nAnd the promo campaign is still running",
        "expected": "Then the user will receive an alert message stating what promo is available\nAnd tapping on the 'Close' button of the alert will close the alert message box\nAND no promo webview will be launched"
      },
      {
        "content": "When the app is foregrounded\nAnd the user enters the range of a promo beacon\nAnd the promo campaign is active",
        "expected": "Then the user will receive an alert message stating what promo is available\nAnd tapping on the 'View details' button of the alert will launch the user to that promo's detail page(webview)"
      },
      {
        "content": "When the app is foregrounded\nAnd the user enters the range of a promo beacon\nAnd the promo campaign has expired",
        "expected": "Then the user will receive an alert message stating what promo is available\nAnd tapping on the 'View details' button of the alert will launch the user to that promo's detail page(webview)\nAnd the promo page will say that the promo has expired\n\n*Ask development to change the campaignEndDate value so that the campaign becomes expired"
      },
      {
        "content": "When the device is asleep",
        "expected": "Then the user can still receive promo beacon notifications"
      },
      {
        "content": "When the app is killed\nAnd the user enters the range of a promo beacon\nand the promo time is still running ",
        "expected": "Then the user will receive a notification stating what promo is available in the beacon range\nAnd tapping on that notification will open Ballpark and the user will be launched to that promo's page(webview)"
      },
      {
        "content": "When the app is killed\nAnd the user enters the range of a promo beacon\nand the promo time has expired",
        "expected": "Then the user will receive a notification stating what promo is available in the beacon range\nAnd tapping on that notification will open Ballpark and the user will be launched to that promo's page(webview)\nAnd the page will say that the promo has expired\n\n*Ask development to change the campaignEndDate value so that the campaign becomes expired"
      },
      {
        "content": "When a user receives a promo background notification\nAnd the user taps on it to access the promo page",
        "expected": "Then the user will no longer receive background notifications for that particular promo"
      },
      {
        "content": "When a user is out of session\nAND the user receives a promo beacon notification\nAND the user taps on the notification",
        "expected": "Then Ballpark will open first to the ballpark guide page of venueid of that promo\nAND then the promo page(webview) will launch"
      },
      {
        "content": "When a user is in the promo beacon range\nAND the user is outside of the operatingEndHour value found in the json",
        "expected": "THEN the user will not receive a promo notification from that beacon"
      },
      {
        "content": "When the user has received a promo notification\nAND the user does not open the notification\nAND the user reaches the the operatingEndHour time found in the json\nAND the user taps on the notification\n",
        "expected": "THEN the app will open and launch the corresponding promo webview for that promo. \n"
      },
      {
        "content": "When the user goes to the Notifications settings",
        "expected": "Then the user will see a the Upgrade & Premier Experience notification setting under At the Game\nAND the user will see a section for From MLB.com Partners\nAND under that section will be a setting for Promotions & Giveaways"
      },
      {
        "content": "When the user is in the notification settings page\nAND the user disables the Upgrade & Premier Experience notification setting",
        "expected": "Then the user will not receive a notification for Upgrades & Premiere Experience when near a beacon with promo type 'Upgrade'"
      },
      {
        "content": "When the user is in the notification settings page\nAND the user disables the Promotions & Giveaway notification",
        "expected": "THEN the user will not receive a notification when near a beacon with promo type 'Promo'"
      }
    ]
  }
]