[
  {
    "id": 29343769,
    "title": "SSO into MPV - Webview deep link support [*requires Configuration, Proxy, DataDog]",
    "section_id": 1573099,
    "template_id": 1,
    "type_id": 4,
    "priority_id": 6,
    "milestone_id": null,
    "refs": null,
    "created_by": 288,
    "created_on": 1663960419,
    "updated_by": 288,
    "updated_on": 1744305981,
    "estimate": null,
    "estimate_forecast": null,
    "suite_id": 561942,
    "display_order": 1,
    "custom_automation_id": null,
    "custom_android_automation": false,
    "custom_ios_automation": false,
    "custom_preconds": "[BP-9828](https://baseball.atlassian.net/browse/BP-9828) / [BP-9690](https://baseball.atlassian.net/browse/BP-9690)\r\n\r\nGIVEN a webview deeplink domain is a known domain configured by the Identity SDK for SSO*\r\nAND the user downloaded the Ballpark app (11.6.0 or greater)\r\nAND user is logged in with MLB account in Ballpark app\r\n\r\n*QA env has a deeplink configured in More Tab (SSO: https://mpvdev1.tickets.com/?agency=MLB_MPV&orgid=48617&pid=8129748 ) to easily validate\r\n\r\nNOTE: \r\nPrerequisite - Remote Config Setup for: SSO configuration\r\n1. Go to Firebase -> Remote Config (links below)\r\n2. Edit \"enable_single_sign_on\" as needed to force display. \r\n3. Save changes.\r\n4. Publish changes.\r\n\r\nBE CAUTIOUS WHEN UPDATING PROD CONFIGURATION AS CHANGES WOULD BE WITNESSED TO LIVE USER\r\n\r\nRemote Configs \r\n[Ballpark QA App](https://console.firebase.google.com/u/0/project/mlb-mobiletools-npd-d08e/config)\r\n[Ballpark](https://console.firebase.google.com/u/0/project/mlb-ballpark-app-831/config)\r\n(can have condition set up to differentiate desired behavior for different envs/platform/target_audience)\r\n\r\n\r\n*validation requires connecting to a Proxy(i.e Charles) to force a failed redirect",
    "custom_steps": null,
    "custom_expected": null,
    "custom_steps_separated": [
      {
        "content": "WHEN user access the deeplink in Ballpark configured for SSO",
        "expected": "THEN user directed into a webview that uses the SSO redirect flow\nAND user is already logged in (or prompted to update the first/last name) within the webview"
      },
      {
        "content": "",
        "expected": ""
      },
      {
        "content": "WHEN user access the deeplink in Ballpark configured for SSO BUT the redirect fails*\n\n\n*validation requires connecting to a Proxy(i.e Charles) to force a failed redirect\n**To simulate a failed redirect, using Proxy tool add a breakpoint to the 'qa-ids.mlb.com' response and hold response from executing (or aborting response)\n",
        "expected": "THEN user directed into a webview that uses the original url without a redirect\nAND user is NOT already logged in (nor prompted to update the first/last name) within the webview\n"
      },
      {
        "content": "",
        "expected": "AND the error will get logged into data dog*\n\n*requires access to DD, view the RealTime-User Monitoring (RUM) session for the user and verify an Error is logged"
      }
    ]
  },
  {
    "id": 29352927,
    "title": "SSO into MPV - T-links will have user already signed into primary MLB account [*requires Configuration, Proxy, DataDog]",
    "section_id": 1573099,
    "template_id": 1,
    "type_id": 4,
    "priority_id": 6,
    "milestone_id": null,
    "refs": null,
    "created_by": 288,
    "created_on": 1664220280,
    "updated_by": 288,
    "updated_on": 1744305970,
    "estimate": null,
    "estimate_forecast": null,
    "suite_id": 561942,
    "display_order": 2,
    "custom_automation_id": null,
    "custom_android_automation": false,
    "custom_ios_automation": false,
    "custom_preconds": "[BP-9828](https://baseball.atlassian.net/browse/BP-9828) / [BP-9690](https://baseball.atlassian.net/browse/BP-9690)\r\n\r\nGIVEN a t-link domain is a known domain configured by the Identity SDK for SSO*\r\nAND the user downloaded the Ballpark app (11.6.0 or greater)\r\nAND user is logged in with MLB account in Ballpark app\r\n\r\n*QA env has a deeplink configured in TicketsTab(BuyTickets) / TeamTab(Schedule) (Angels Sept 30th - SSO: https://mpvdev1.tickets.com/?agency=MLB_MPV&orgid=48617&pid=8129748 ) to easily validate\r\n**once PV, PVO, MPV is deployed to Prod then Staging links can be used to verify\r\n\r\nNOTE: \r\nPrerequisite - Remote Config Setup for: SSO configuration\r\n1. Go to Firebase -> Remote Config (links below)\r\n2. Edit \"enable_single_sign_on\" as needed to force display. \r\n3. Save changes.\r\n4. Publish changes.\r\n\r\nBE CAUTIOUS WHEN UPDATING PROD CONFIGURATION AS CHANGES WOULD BE WITNESSED TO LIVE USER\r\n\r\nRemote Configs \r\n[Ballpark QA App](https://console.firebase.google.com/u/0/project/mlb-mobiletools-npd-d08e/config)\r\n[Ballpark](https://console.firebase.google.com/u/0/project/mlb-ballpark-app-831/config)\r\n(can have condition set up to differentiate desired behavior for different envs/platform/target_audience)\r\n\r\n\r\n*validation requires connecting to a Proxy(i.e Charles) to force a failed redirect",
    "custom_steps": null,
    "custom_expected": null,
    "custom_steps_separated": [
      {
        "content": "GIVEN a t-link domain is a known domain configured by the Identity SDK for SSO\nWHEN user navigates to TicketsTab > Buy Tickets\nAND user taps on the t-link",
        "expected": "THEN user directed into a webview that uses the SSO redirect flow\nAND user is already logged in (or prompted to update the first/last name) within the webview"
      },
      {
        "content": "",
        "expected": ""
      },
      {
        "content": "GIVEN a t-link domain is a known domain configured by the Identity SDK for SSO\nWHEN user navigates to TicketsTab > Buy Tickets\nAND user taps on the t-link in Ballpark configured for SSO BUT the redirect fails*\n\n\n*validation requires connecting to a Proxy(i.e Charles) to force a failed redirect\n**To simulate a failed redirect, using Proxy tool add a breakpoint to the 'qa-ids.mlb.com' response and hold response from executing (or aborting response)\n",
        "expected": "THEN user directed into a webview that uses the original url without a redirect\nAND user is NOT already logged in (nor prompted to update the first/last name) within the webview\n"
      },
      {
        "content": "",
        "expected": "AND the error will get logged into data dog*\n\n*requires access to DD, view the RealTime-User Monitoring (RUM) session for the user and verify an Error is logged"
      },
      {
        "content": "",
        "expected": ""
      },
      {
        "content": "REPEAT ABOVE STEPS, accessing T-LINK from TEAM TAB > Schedule",
        "expected": "EXPECTATION TO BE THE SAME, VALIDATING DIFFERENT POINT OF ENTRY"
      },
      {
        "content": "REPEAT ABOVE STEPS, accessing T-LINK from HOME TAB > UPCOMING MATCHUP\n\n*[requires mock loc app/service & schedule]\nRequirements for Section/Cards shown (as of June 2021)\n*location enabled (passed from BP to Home Service)\n*available T-link for upcoming games (within 30 days)\n*stadium location is within 60 miles of device location",
        "expected": "EXPECTATION TO BE THE SAME, VALIDATING DIFFERENT POINT OF ENTRY"
      }
    ]
  },
  {
    "id": 29352928,
    "title": "SSO with account that exists in PV",
    "section_id": 1573922,
    "template_id": 1,
    "type_id": 4,
    "priority_id": 6,
    "milestone_id": null,
    "refs": null,
    "created_by": 288,
    "created_on": 1664221948,
    "updated_by": 288,
    "updated_on": 1679331217,
    "estimate": null,
    "estimate_forecast": null,
    "suite_id": 561942,
    "display_order": 1,
    "custom_automation_id": null,
    "custom_android_automation": null,
    "custom_ios_automation": null,
    "custom_preconds": "[BP-9863](https://baseball.atlassian.net/browse/BP-9863)\r\n\r\nGIVEN user has previously logged into MyTickets with MLB Account*\r\nAND the user downloaded the Ballpark app (11.6.0 or greater for iOS, 12.2.0 or greater for Android)\r\nAND user is logged in with MLB account in Ballpark app\r\n\r\n\r\nAccount exist in PV for testing - bparkdev@gmail.com",
    "custom_steps": null,
    "custom_expected": null,
    "custom_steps_separated": [
      {
        "content": "WHEN user taps on an active t-link ** for a TDC home venue***\n\n",
        "expected": "THEN user will be taken to a purchase webview WITHOUT being prompted to enter email and password\n\n"
      },
      {
        "content": "WHEN (within webview) user views My Account from the MyTickets hamburger menu",
        "expected": "THEN user will see my MLB account primary email as the logged in email"
      }
    ]
  },
  {
    "id": 29352929,
    "title": "SSO with new account",
    "section_id": 1573922,
    "template_id": 1,
    "type_id": 4,
    "priority_id": 6,
    "milestone_id": null,
    "refs": null,
    "created_by": 288,
    "created_on": 1664221958,
    "updated_by": 288,
    "updated_on": 1689023002,
    "estimate": null,
    "estimate_forecast": null,
    "suite_id": 561942,
    "display_order": 2,
    "custom_automation_id": null,
    "custom_android_automation": false,
    "custom_ios_automation": false,
    "custom_preconds": "[BP-9863](https://baseball.atlassian.net/browse/BP-9863)\r\n\r\nGIVEN the user downloaded the Ballpark app (11.6.0 or greater for iOS, 12.2.0 or greater for Android)\r\nAND user is logged into Ballpark app with a fresh MLB account* \r\n\r\n\r\n*can be achieved by onboarding a new MLB acct (w/out prev MPV acct)",
    "custom_steps": null,
    "custom_expected": null,
    "custom_steps_separated": [
      {
        "content": "WHEN user taps on an active t-link ** for a TDC home venue***\n\n",
        "expected": "THEN user will be taken to a purchase webview WITHOUT being prompted to enter email and password\n\n*A prompt page may be show for customer to confirm First and Last name"
      },
      {
        "content": "WHEN (within webview) user views My Account from the MyTickets hamburger menu",
        "expected": "THEN user will see my MLB account primary email as the logged in email"
      }
    ]
  },
  {
    "id": 29352931,
    "title": "SSO for subsequent purchase links (test with same club and different clubs)",
    "section_id": 1573922,
    "template_id": 1,
    "type_id": 4,
    "priority_id": 6,
    "milestone_id": null,
    "refs": null,
    "created_by": 288,
    "created_on": 1664221985,
    "updated_by": 288,
    "updated_on": 1679331347,
    "estimate": null,
    "estimate_forecast": null,
    "suite_id": 561942,
    "display_order": 4,
    "custom_automation_id": null,
    "custom_android_automation": null,
    "custom_ios_automation": null,
    "custom_preconds": "GIVEN the user downloaded the Ballpark app (11.6.0 or greater for iOS, 12.2.0 or greater for Android)\r\nAND user is logged in with MLB account in Ballpark app\r\nAND user has previously tapped on a ticket purchase link webview that successfully automatically logged them in* \r\n\r\n\r\n*different than the t-link verified within the following",
    "custom_steps": null,
    "custom_expected": null,
    "custom_steps_separated": [
      {
        "content": "WHEN user taps on an different active t-link for the same TDC home venue",
        "expected": "THEN user will be taken to a purchase webview WITHOUT being prompted to enter email and password\n\n*A prompt page may be show for customer to enter First and Last name\n"
      },
      {
        "content": "WHEN (within webview) user views My Account from the MyTickets hamburger menu\n",
        "expected": "THEN user will see my MLB account primary email as the logged in email"
      },
      {
        "content": "WHEN user navigates to another Team's(TDC home venue) page within Ballpark app\nAND user taps on an active t-link",
        "expected": "THEN user will be taken to a purchase webview WITHOUT being prompted to enter email and password\n\n*A prompt page may be show for customer to enter First and Last name"
      },
      {
        "content": "WHEN (within webview) user views My Account from the MyTickets hamburger menu\n",
        "expected": "THEN user will see my MLB account primary email as the logged in email"
      }
    ]
  },
  {
    "id": 29352932,
    "title": "SSO after password reset",
    "section_id": 1573922,
    "template_id": 1,
    "type_id": 4,
    "priority_id": 6,
    "milestone_id": null,
    "refs": null,
    "created_by": 288,
    "created_on": 1664221997,
    "updated_by": 288,
    "updated_on": 1679331378,
    "estimate": null,
    "estimate_forecast": null,
    "suite_id": 561942,
    "display_order": 5,
    "custom_automation_id": null,
    "custom_android_automation": null,
    "custom_ios_automation": null,
    "custom_preconds": "GIVEN the user downloaded the Ballpark app (11.6.0 or greater for iOS, 12.2.0 or greater for Android)\r\nAND user is logged in with MLB account in Ballpark app\r\nAND user resets MLB account password while logged into Ballpark*\r\n\r\n\r\n*user resets the MLB account (such as mlb.com external webpage, mlb app, mlb play app, within BPapp webview to mlb.com) but BP app remains logged in during the reset",
    "custom_steps": null,
    "custom_expected": null,
    "custom_steps_separated": [
      {
        "content": "WHEN user taps on an active t-link for a TDC home venue",
        "expected": "THEN user will be taken to a purchase webview\nAND user will be prompted to enter email and password*\n\n*prompt within webview to update pw may not be shown with SSO completing silently. this is behavior is OK, as long as the PW reset is resolved the next time user logs into BP (so, if user logs out, then user should be forced to use newly reset PW allowing login to complete successfully into BP AND accessing TDC t-link should SSO smoothly)"
      }
    ]
  },
  {
    "id": 29365044,
    "title": "Ticketmaster clubs (unaffected by SSO configuration)",
    "section_id": 1573922,
    "template_id": 1,
    "type_id": 4,
    "priority_id": 6,
    "milestone_id": null,
    "refs": null,
    "created_by": 288,
    "created_on": 1664300242,
    "updated_by": 288,
    "updated_on": 1679331402,
    "estimate": null,
    "estimate_forecast": null,
    "suite_id": 561942,
    "display_order": 6,
    "custom_automation_id": null,
    "custom_android_automation": null,
    "custom_ios_automation": null,
    "custom_preconds": "GIVEN user downloaded the Ballpark app (11.6.0 or greater for iOS, 12.2.0 or greater for Android)\r\nAND user is logged in with MLB account in Ballpark app\r\nAND SSO is enabled for BP/TDC clubs \r\n\r\n\r\n**TM CLUBS (as of 2022) - COL, SD, AZ, ATL, TOR, NYY, SEA, CWS",
    "custom_steps": "WHEN user accesses BuyTix flow for TM club",
    "custom_expected": "THEN TM clubs flow is unaffected",
    "custom_steps_separated": [
      {
        "content": "WHEN user taps on an active t-link ** for a TM home venue**\n\n",
        "expected": "THEN user will be taken to a TM purchase webview \n\n\n"
      },
      {
        "content": "WHEN (within webview) user selects tickets to purchase AND user proceeds to purchasing",
        "expected": "THEN user will be prompted to enter email and password (within TM)"
      }
    ]
  },
  {
    "id": 29352933,
    "title": "[WIP] SSO with different types of T-links (promos/coupon/sales groups)",
    "section_id": 1573922,
    "template_id": 1,
    "type_id": 4,
    "priority_id": 6,
    "milestone_id": null,
    "refs": null,
    "created_by": 288,
    "created_on": 1664222592,
    "updated_by": 288,
    "updated_on": 1664227556,
    "estimate": null,
    "estimate_forecast": null,
    "suite_id": 561942,
    "display_order": 7,
    "custom_automation_id": null,
    "custom_android_automation": null,
    "custom_ios_automation": null,
    "custom_preconds": "GIVEN the user downloaded the Ballpark app (11.6.0 or greater)\r\nAND user is logged in with MLB account in Ballpark app",
    "custom_steps": null,
    "custom_expected": "GET CLARITY ON EXPECTATION / WHEN RELEASED\r\n\r\nWhen going to a Club.com web view from BP app, do we expect the SSO persist beyond just the t-links?\r\na few examples and wanted to confirm the expectation for following:\r\nBAL - Ticket Promotions & Giveaways\r\nCHC - Promotional Schedule\r\nCWS - Upcoming Promotions\r\nCIN - Offers & Promos\r\nCLE - Family Value Pack Tickets\r\n\r\n\r\n(above links may not be guaranteed, prob best to add to a QA team page)",
    "custom_steps_separated": null
  },
  {
    "id": 29365045,
    "title": "SSO into MLB - Webview deep link support into MLB.com",
    "section_id": 1574672,
    "template_id": 1,
    "type_id": 4,
    "priority_id": 6,
    "milestone_id": null,
    "refs": null,
    "created_by": 288,
    "created_on": 1664304680,
    "updated_by": 288,
    "updated_on": 1674173742,
    "estimate": null,
    "estimate_forecast": null,
    "suite_id": 561942,
    "display_order": 1,
    "custom_automation_id": null,
    "custom_android_automation": null,
    "custom_ios_automation": null,
    "custom_preconds": "GIVEN a webview deeplink domain is a known domain configured by the Identity SDK for SSO*\r\nAND the user downloaded the Ballpark app (12.0.0 or greater)\r\nAND user is logged in with MLB account in Ballpark app\r\n\r\n\r\n*Testing Notes:\r\n**any webview deeplink that has URL within MLB.com domain SSO\r\n",
    "custom_steps": null,
    "custom_expected": null,
    "custom_steps_separated": [
      {
        "content": "WHEN user access the deeplink in Ballpark to MLB.com configured for SSO",
        "expected": "THEN user directed into a webview for MLB.com\nAND user is already logged in within the webview\n\n[To confirm, within webview navigate to account/profile and confirm personal info already stored - email address, name, DOB]"
      }
    ]
  }
]